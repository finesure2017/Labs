%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%   DO NOT MODIFY BELOW %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% initializationssetup_lab_ip01_2_sip% specs of pendulum and cart systemM = Mc;   % cart massm = Mp;   % pendulum massl = lp;   % pend. lengthg = 9.8;% linearized model of pendulum-cart systemalpha1 = -Eff_g*Kg^2*Eff_m*Kt*Km/Rm/r_mp^2;alpha2 = Eff_g*Kg*Eff_m*Kt/Rm/r_mp;a1 = alpha1;a2 = alpha2;%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%   DO NOT MODIFY ABOVE %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%   SYSTEM MODEL %%%%%%%%%%%%%%%%%%%%%%%%theta0 = 10 * pi / 180 % initial condition for theta% Enter your A,B,C,D matricesA = [0 1 0 0;      0 a1/M -(m*g)/M 0;     0 0 0 1;     0 a1/(l*M) (M+m)*g/(l*M) 0]B = [0; a2/M; 0; a2/(l*M)]C = [1 0 0 0;     0 0 1 0]D = [0; 0]sys = ss(A,B,C,D)poles = eig(A) % To show exist poles in RHP => Open loop unstable%%%%%%%%%%%%%%%%%%%%% CONTROLLER DESIGN %%%%%%%%%%%%%%%%%%%%%%%%% Find your K gaincontrollability = rank(ctrb(sys))controllerPoles = [-2 -4 -8 -10]% Controller gainK = place(A, B, controllerPoles)%%%%%%%%%%%%%%%%%%%%%%%% OBSERVER DESIGN %%%%%%%%%%%%%%%%%%%%%%%% Find your L gainobservability = rank(obsv(sys)) observerPoles = [-40 -40 -50 -50]; % Observer gain L = place(A', C', observerPoles)'